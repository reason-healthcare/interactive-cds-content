#!/usr/bin/env bash

SCRIPT_DIR="$(cd -P "$(dirname -- "${BASH_SOURCE}")" >/dev/null 2>&1 && pwd)"

cd $SCRIPT_DIR/../

./_updatePublisher.sh -f -y

npm install -g fsh-sushi jake

if ! command -v jekyll &> /dev/null
then
  gem install jekyll -N
else
  echo "jekyll already installed"
fi

if ! command -v fhir &> /dev/null
then
  if command -v dotnet &> /dev/null
  then
    curl --proto '=https' --tlsv1.2 -sSf https://dot.net/v1/dotnet-install.sh | sh && dotnet tool install -g firely.terminal
  else
    echo "dotnet not installed, not installing fhir CLI"
  fi
else
  echo "fhir command already installed"
fi

echo Done setting up environment%